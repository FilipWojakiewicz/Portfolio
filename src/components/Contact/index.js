import './index.scss'
import Loader from '../Loader'
import PopupText from '../PopupText'
import React, { useEffect, useState, useRef } from 'react';
import emailjs from '@emailjs/browser'
import { MapContainer, TileLayer, Marker, Popup, GeoJSON } from 'react-leaflet'
import L from 'leaflet';
import marker_colors from '../../assets/images/marker_colors.png'
import ParticleSnow from '../ParticleSnow'


const Contact = () => {
    const [letterClass, setLetterClass] = useState('text-animate')
    const refForm = useRef();
    
    var myIcon = L.icon({
        iconUrl: marker_colors,
        iconSize: [30, 40],
        // iconAnchor: [0, 110],
        popupAnchor: [-3, -76]
    });

    var myStyle = {
        "color": "#93ffbc",
        "weight": 5,
        "opacity": 0.65
    };

    var myGeoJSON = { "type": "FeatureCollection", "features": [{ "type": "Feature", "geometry": { "type": "Polygon", "coordinates": [[[14.22722407, 53.92873152], [14.243384, 53.92445653], [14.25720191, 53.92224991], [14.27242503, 53.92252574], [14.27804587, 53.92431862], [14.29490841, 53.92004317], [14.30989732, 53.91631904], [14.32652565, 53.91287047], [14.33870415, 53.91121506], [14.36142173, 53.9108012], [14.38015788, 53.91356021], [14.40147024, 53.91769839], [14.41669336, 53.92169824], [14.42840346, 53.9255598], [14.44767786, 53.93242701], [14.46562038, 53.94193304], [14.4814696, 53.95266873], [14.49163702, 53.95900325], [14.50150541, 53.96410536], [14.51406517, 53.96674413], [14.5370914, 53.97096583], [14.57566781, 53.98257328], [14.60437583, 53.98907907], [14.62829918, 53.99452909], [14.64564362, 53.99874797], [14.67206826, 54.00400824], [14.69186475, 54.00943754], [14.71694029, 54.01835555], [14.72881818, 54.02417062], [14.74960449, 54.02746547], [14.78523817, 54.03482947], [14.84693721, 54.04645419], [14.89345895, 54.05439588], [14.92711297, 54.06136781], [14.96373647, 54.0704683], [15.01506173, 54.08352414], [15.05872853, 54.09518799], [15.09994096, 54.10160394], [15.14224752, 54.11143981], [15.17178917, 54.11806702], [15.22394295, 54.13003606], [15.26838463, 54.13998709], [15.2846603, 54.1467873], [15.2868228, 54.14718727], [15.30514715, 54.14912044], [15.33621888, 54.15331977], [15.35727481, 54.15551925], [15.37639587, 54.15778526], [15.38731769, 54.15894539], [15.40475179, 54.16163171], [15.4206566, 54.16413878], [15.43594967, 54.16592945], [15.45904222, 54.16646664], [15.47678219, 54.16592945], [15.48794614, 54.1666457], [15.50430973, 54.16995819], [15.51669712, 54.17237524], [15.53611933, 54.17855151], [15.54483639, 54.18257901], [15.55112321, 54.18754146], [15.55682857, 54.18699897], [15.56174945, 54.18729108], [15.56588583, 54.18712416], [15.57187646, 54.1869155], [15.57950738, 54.1870407], [15.58492748, 54.18749973], [15.59013362, 54.18825086], [15.60567876, 54.19066613], [15.61469673, 54.1920829], [15.62830719, 54.19437893], [15.63957965, 54.19638175], [15.64342064, 54.19701677], [15.65344061, 54.19794486], [15.67071073, 54.20031072], [15.69545246, 54.20540974], [15.71788105, 54.20908598], [15.75216677, 54.21660453], [15.80627652, 54.23218392], [15.8439081, 54.2404816], [15.8677196, 54.24386868], [15.89967714, 54.24588249], [15.92756165, 54.24743855], [15.98472373, 54.25241075], [16.04888153, 54.26141707], [16.11502873, 54.27826231], [16.17819184, 54.30235646], [16.23687882, 54.33426675], [16.31933527, 54.38852314], [16.37808838, 54.44234488], [16.39030437, 54.44403625], [16.40252037, 54.45316839], [16.41415464, 54.46804605], [16.43276949, 54.48798714], [16.44731234, 54.49744731], [16.4705809, 54.51163346], [16.49460097, 54.52260769], [16.51491606, 54.53305703], [16.52830556, 54.54162885], [16.54908236, 54.544575], [16.57216769, 54.55073444], [16.58371036, 54.55367993], [16.61002763, 54.55876709], [16.6561983, 54.56492439], [16.68944118, 54.56893951], [16.71483504, 54.56974249], [16.74715451, 54.56867185], [16.77762715, 54.57188369], [16.80348272, 54.58017977], [16.82610635, 54.58312313], [16.85024826, 54.58994316], [16.85445612, 54.58930712], [16.86012759, 54.58930712], [16.86433545, 54.58994316], [16.87037283, 54.58962514], [16.8778738, 54.59015517], [16.88537478, 54.59047318], [16.90275509, 54.59481914], [16.91501278, 54.59852874], [16.92525802, 54.60255592], [16.93513735, 54.60647674], [16.93971112, 54.60838403], [16.95416422, 54.61304592], [16.98009281, 54.62573613], [17.02166987, 54.6494902], [17.04139233, 54.66305772], [17.04632294, 54.66760491], [17.05105367, 54.66945447], [17.06131467, 54.67199748], [17.06577888, 54.67384683], [17.07164231, 54.67596579], [17.09329626, 54.68265058], [17.10244808, 54.68408048], [17.11877295, 54.69008549], [17.13732394, 54.69437425], [17.15018596, 54.69794786], [17.16626348, 54.70280747], [17.182341, 54.70809521], [17.19099813, 54.71238206], [17.21078585, 54.71838289], [17.22661603, 54.72395429], [17.2461564, 54.73095317], [17.26440321, 54.73542522], [17.30292007, 54.74014029], [17.31921456, 54.74116027], [17.33786487, 54.74591982], [17.3516072, 54.74920585], [17.3722207, 54.75124532], [17.39047837, 54.75283151], [17.40912868, 54.75328469], [17.42071151, 54.75475751], [17.46553381, 54.75582701], [17.5118651, 54.76194412], [17.549951, 54.76896632], [17.57429456, 54.76873982], [17.61512893, 54.77485497], [17.66420869, 54.78187494], [17.69640502, 54.78866729], [17.73802466, 54.79749564], [17.76393877, 54.80315383], [17.81930075, 54.80971634], [17.84050321, 54.81333657], [17.86288358, 54.81740895], [17.95903942, 54.83118419], [18.04611384, 54.83248125], [18.1684684, 54.83204891], [18.25254025, 54.83204891], [18.30583579, 54.83507525], [18.33811338, 54.83334594], [18.34411851, 54.82599554], [18.35537813, 54.8186438], [18.37489481, 54.81129073], [18.40642175, 54.80090764], [18.42218522, 54.79701329], [18.4202416, 54.77437642], [18.40564055, 54.7575292], [18.39651489, 54.73119139], [18.40490993, 54.7245849], [18.42012813, 54.72300742], [18.4302736, 54.71737308], [18.44315054, 54.70790561], [18.45095474, 54.70294559], [18.45875895, 54.70136727], [18.46695337, 54.69708295], [18.47436736, 54.69460235], [18.468124, 54.68761075], [18.46617294, 54.67204448], [18.46695337, 54.665049], [18.4646121, 54.65918089], [18.46656315, 54.65602079], [18.4759282, 54.65128017], [18.47358694, 54.64450691], [18.47670862, 54.63999077], [18.47088916, 54.6369168], [18.46859883, 54.6350814], [18.47088916, 54.63263406], [18.4789934, 54.63100242], [18.49308774, 54.6311044], [18.50242524, 54.63314393], [18.50806298, 54.63395972], [18.51193892, 54.63783448], [18.51546251, 54.64272838], [18.51810519, 54.64089324], [18.51352453, 54.62661706], [18.51229128, 54.62192522], [18.51334835, 54.61488645], [18.51669576, 54.61019326], [18.52321439, 54.60141758], [18.52867595, 54.59488562], [18.54325887, 54.58526532], [18.54464415, 54.5792442], [18.54983894, 54.57261995], [18.55191686, 54.56217954], [18.56092117, 54.54751831], [18.56196013, 54.5408889], [18.56438437, 54.53506216], [18.56265277, 54.52883266], [18.56265277, 54.51677287], [18.55780429, 54.51797901], [18.55234962, 54.51639651], [18.55122408, 54.51486364], [18.55131066, 54.51260193], [18.55639033, 54.50595842], [18.56169835, 54.4989134], [18.56359407, 54.49671158], [18.56378364, 54.49483994], [18.56928123, 54.48559059], [18.56833337, 54.48426908], [18.56492107, 54.48096512], [18.56241997, 54.46672557], [18.56592706, 54.45169085], [18.59310696, 54.43002095], [18.61458785, 54.41854401], [18.63650712, 54.41114605], [18.65053546, 54.40859472], [18.65930317, 54.41038067], [18.66017994, 54.41675842], [18.67333151, 54.40961527], [18.68779823, 54.40400193], [18.70094979, 54.40221571], [18.71541651, 54.40706385], [18.725061, 54.40782929], [18.73119839, 54.40374676], [18.72681454, 54.39711178], [18.73339032, 54.39302818], [18.71717006, 54.39328342], [18.70752558, 54.38970996], [18.7158549, 54.38409389], [18.72243068, 54.38919944], [18.72637615, 54.38613619], [18.7189236, 54.38026431], [18.85055949, 54.35222297], [18.90927409, 54.3478357], [18.93486764, 54.35134556], [18.94390066, 54.36406628], [18.96422494, 54.35880301], [18.97325796, 54.3478357], [19.01917579, 54.34388675], [19.14112152, 54.34739695], [19.27661677, 54.35924164], [19.37146344, 54.37195992], [19.51076156, 54.40564849], [19.6509715, 54.46475307], [19.65283927, 54.4639512], [19.65701458, 54.46280522], [19.66339353, 54.46186145], [19.666641, 54.46118731], [19.66988846, 54.46051316], [19.67220808, 54.45963675], [19.6745277, 54.45923224], [19.67591947, 54.45902999], [19.67847105, 54.45822096], [19.68809747, 54.45545668], [19.69368932, 54.45379103], [19.70508255, 54.45114152], [19.72103308, 54.4498167], [19.73641394, 54.44716693], [19.75065549, 54.44716693], [19.76392838, 54.44612065], [19.78258933, 54.44445127], [19.79872965, 54.4418489], [19.81050967, 54.44124842], [20.0707198, 54.42198473], [20.34196914, 54.40179402], [20.63454138, 54.36524317], [20.69352764, 54.37555177], [20.83214534, 54.36352481], [20.99730685, 54.35836932], [21.25684636, 54.33258216], [21.46329825, 54.32570285], [21.72578708, 54.32742279], [22.15343742, 54.33774089], [22.35694, 54.34461818], [22.79343828, 54.36352481], [22.86127247, 54.41332787], [22.92320804, 54.39959513], [23.0087381, 54.38242274], [22.99989017, 54.36008789], [23.07067367, 54.33430181], [23.04118054, 54.3102202], [23.10901474, 54.30333716], [23.16505168, 54.3188224], [23.16210236, 54.29301042], [23.23288587, 54.2809593], [23.25942968, 54.25512358], [23.35085838, 54.25856928], [23.41279394, 54.20857847], [23.42459119, 54.17751924], [23.4717802, 54.17234043], [23.51012126, 54.12743025], [23.52781714, 54.03919564], [23.48652676, 53.99414107], [23.7023438, 53.46430247], [23.81358534, 53.22078349], [23.91741078, 53.14523243], [23.89516247, 53.06063546], [23.96190739, 52.98033742], [23.93224298, 52.91330818], [23.91741078, 52.68013533], [23.77650483, 52.6126415], [23.51694124, 52.5630798], [23.30929037, 52.42762651], [23.18321662, 52.26906993], [23.38159784, 52.1983417], [23.56571888, 52.12176512], [23.67182254, 52.06040896], [23.68430532, 51.9893607], [23.65621906, 51.94706227], [23.61877071, 51.8989474], [23.63437419, 51.79484321], [23.57196028, 51.75815668], [23.53139123, 51.72917256], [23.55011541, 51.66921311], [23.54699471, 51.61305006], [23.57508097, 51.54905576], [23.63437419, 51.49662973], [23.69366741, 51.39938507], [23.64518446, 51.33629552], [23.64954445, 51.28451222], [23.7062244, 51.27905794], [23.74546436, 51.22447958], [23.85446426, 51.16436853], [23.87190424, 51.11239133], [23.91114421, 51.06309577], [23.96782415, 50.95885479], [24.08990404, 50.87089113], [24.15094398, 50.86538788], [24.09426403, 50.82684694], [23.99398413, 50.82684694], [23.98090414, 50.76897582], [24.04630408, 50.6889407], [24.10734402, 50.63642975], [24.05066407, 50.46466959], [24.00211426, 50.37934046], [23.69717824, 50.34599304], [23.54906646, 50.25138144], [23.32254256, 50.10072901], [22.98275671, 49.83172871], [22.76494527, 49.62334758], [22.65168332, 49.51033653], [22.76494527, 49.39706379], [22.75623281, 49.22666366], [22.78237019, 49.15264051], [22.88691968, 49.00426183], [22.68442003, 49.03927087], [22.60534247, 49.08641499], [22.58158526, 49.09730514], [22.56359767, 49.0877486], [22.54594946, 49.09174924], [22.52422858, 49.09397167], [22.49877443, 49.08663726], [22.48350194, 49.08974896], [22.47593518, 49.09602807], [22.44908998, 49.10504164], [22.42843983, 49.09783091], [22.4098547, 49.10684415], [22.37956781, 49.13432443], [22.36304769, 49.14558243], [22.33413748, 49.14558243], [22.32174739, 49.13567552], [22.29696721, 49.14152984], [22.28113542, 49.14513216], [22.26048527, 49.14873422], [22.23983512, 49.15278622], [22.22469168, 49.154587], [22.21987331, 49.16539032], [22.20128817, 49.17259122], [22.18063802, 49.17664127], [22.14759778, 49.18698988], [22.11731089, 49.19283814], [22.09321905, 49.19598692], [22.07669893, 49.19823592], [22.05260709, 49.20093459], [22.03466379, 49.20176306], [21.88394694, 49.36058709], [21.42020277, 49.44357655], [21.09558185, 49.39832696], [20.9332714, 49.30014301], [20.6782121, 49.42095697], [20.35359119, 49.3907813], [20.0985319, 49.30770258], [20.04056387, 49.17145285], [19.8202854, 49.20176306], [19.76231737, 49.41341479], [19.48407087, 49.5715572], [19.2869796, 49.5489967], [19.15944996, 49.41341479], [18.9855459, 49.41341479], [18.81164183, 49.5489967], [18.54498894, 49.87883995], [18.03487035, 50.02058014], [17.82618548, 49.97586514], [17.6175006, 50.13218575], [17.75662385, 50.25094551], [17.70445263, 50.3213194], [17.65517982, 50.28429348], [17.46968215, 50.26947504], [17.35954291, 50.27318008], [17.17114684, 50.38050093], [16.908302, 50.43866036], [16.86581977, 50.40453259], [17.01912522, 50.27013673], [17.01543111, 50.22761692], [16.90091379, 50.21579913], [16.81964343, 50.18387646], [16.71990254, 50.10101457], [16.63124397, 50.10930722], [16.57583236, 50.15903296], [16.52226781, 50.24651929], [16.21971145, 50.41600205], [16.2373833, 50.47602083], [16.43766428, 50.56964782], [16.3080707, 50.67428961], [16.17258651, 50.62947164], [15.98408677, 50.61078487], [15.77202455, 50.7339804], [15.35379074, 50.80476455], [15.24186902, 50.99423479], [14.9944631, 51.02018035], [14.98700506, 50.8680233], [14.83516217, 50.87499219], [14.94559336, 51.02804424], [15.00633052, 51.19443563], [15.03945987, 51.28604099], [14.97596194, 51.3498838], [14.96491882, 51.4394587], [14.912464, 51.49105676], [14.73025253, 51.53572789], [14.71644863, 51.57692391], [14.76338189, 51.61636843], [14.74681721, 51.69173206], [14.65847226, 51.7344965], [14.62810368, 51.79429879], [14.58945276, 51.84378926], [14.68847964, 51.9144159], [14.73054874, 51.95432094], [14.70789615, 51.9941905], [14.75643741, 52.03601536], [14.7596735, 52.09172103], [14.69495181, 52.10364893], [14.68524356, 52.17316474], [14.71113223, 52.23266339], [14.59786928, 52.28614409], [14.55580018, 52.36920813], [14.53638367, 52.42647088], [14.62161232, 52.49280894], [14.62161232, 52.58516362], [14.4810161, 52.67391422], [14.12671364, 52.84068602], [14.13233748, 52.95941804], [14.32917219, 53.05754968], [14.38541067, 53.15208587], [14.43602531, 53.27332727], [14.38541067, 53.38416398], [14.31792449, 53.53484123], [14.26730985, 53.71162041], [14.20308284, 53.91285314], [14.22722407, 53.92873152]]] }, "id": "4e25d9ce-10ee-49eb-9009-2f59d7918035", "properties": { "name": "" } }] };
    
    useEffect(() => {
        setLetterClass('text-animate-hover')
    }, [])

    const sendEmail = (e) => {
        e.preventDefault()

        emailjs
        .sendForm(
            'service_zd6lehi',
            'template_56osyin',
            refForm.current,
            'nxaHD7O2ppY7KtIUJ'
        ).then (
            () => {
                alert('Message successfully sent!')
                window.location.reload(false)
            },
            () => {
                alert('Failed to send the message!')
            }
        )
    }

    return (
        <>
        <div className='container contact-page'>
            <div className='tsparticles2'>
                {/* <ParticleSnow></ParticleSnow> */}
            </div>
            <div className='text-zone'>
                <h1>
                    <PopupText idx={15} letterClass={letterClass} strArray={['C', 'o', 'n', 't', 'a', 'c', 't', ' ', 'M', 'e']}/>
                </h1>

                <p>
                    fffffffffffffffffffffffffffffffffffffffffddddddddddddddddddddddddd
                    fffffffffffffffffffffffffffffffffffffffffddddddddddddddddddddddddd
                    ffffffffdddddddddddddddddddddddddffffffffddddddddddddddddddddddddd
                    ffffffffdddddddddddddddddddddddddffffffffddddddddddddddddddddddddd
                    ffffffffdddddddddddddddddddddddddffffffffddddddddddddddddddddddddd
                </p>
                
                <br></br>
                <div className='contact-form'>
                    <form ref={refForm} onSubmit={sendEmail}> 
                        <ul>
                            <li className='half'>
                                <input type='text' name="name" placeholder='Name' required/>
                            </li>
                            <li className='half'>
                                <input type='email' name="email" placeholder='Email' required/>
                            </li>
                            <li>
                                <input placeholder="Subject" type="text" name="subject" required/>
                            </li>
                            <li>
                                <textarea placeholder="Message" type="text" name="message" required>

                                </textarea>
                            </li>
                            <li>
                                <input type="submit" className="flat-button" value="SEND" />
                            </li>
                        </ul>
                    </form>
                </div>
            </div>

            

            <div className='map-wrap'>

                    <div className='info-map'>
                        Filip Wojakiewicz
                        <br />
                        Poland,
                        <br />
                        Weso≈Ça 5 <br />
                        Wilczyce <br />
                        <span>wojakiewicz.filip@gmail.com</span>
                    </div>
                    <MapContainer center={[51.1428564, 17.1505418]} zoom={6} minZoom={2} zoomControl={false}>
                <TileLayer 
                    attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                />
                <Marker icon={myIcon} position={[51.1428564, 17.1505418]}>
                    <Popup>
                        I live here!
                    </Popup>
                </Marker>
                <GeoJSON style={myStyle} data={myGeoJSON.features}></GeoJSON>
            </MapContainer>
            </div>

        </div>

        <Loader></Loader>
        </>
    )
}

export default Contact